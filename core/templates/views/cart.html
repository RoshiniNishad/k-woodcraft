{% extends "base/base.html" %}
{% block title %}<title>Cart | K-WoodCraft</title>{% endblock %}

{% block banner %}{% endblock %}
{% load static %}

{% block body %}
<div class="container py-5">
  <!-- Page Title -->
  <div class="d-flex align-items-center mb-4">
    <i class="fas fa-shopping-cart text-success me-2 fa-lg"></i>
    <h2 class="mb-0 fw-bold">Your Shopping Cart</h2>
  </div>

  {% if cart_items %}
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-striped align-middle">
      <thead class="table-success">
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart_items %}
        <tr>
          <td class="fw-semibold">{{ item.product.name }}</td>
          <td>
            <form method="post" action="{% url 'update_cart' item.pk %}" class="d-flex flex-wrap gap-2">
              {% csrf_token %}
              <input type="number" name="quantity" 
                     value="{{ item.quantity }}" 
                     min="1" 
                     class="form-control form-control-sm w-auto">
              <button type="submit" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-sync-alt"></i>
              </button>
            </form>
          </td>
          <td>₹{{ item.product.price }}</td>
          <td>₹{{ item.total_price }}</td>
          <td>
            <a href="{% url 'remove_from_cart' item.pk %}" 
               class="btn btn-sm btn-outline-danger">
              <i class="fas fa-trash-alt"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Grand Total & Checkout -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mt-4">
    <h4 class="mb-3 mb-md-0">
      <span class="text-muted">Grand Total:</span> 
      <strong>₹{{ total }}</strong>
    </h4>
    <a href="{% url 'cart_checkout' %}" class="btn btn-success btn-lg shadow-sm">
      <i class="fas fa-credit-card"></i> Proceed to Checkout
    </a>
  </div>

  {% else %}
  <div class="alert alert-warning d-flex align-items-center" role="alert">
    <i class="fas fa-info-circle me-2"></i>
    <span>Your cart is empty.</span>
  </div>
  {% endif %}
</div>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
{% endblock %}
